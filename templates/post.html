{% extends "_base.html" %}

{% block title %}{{ page.title }}{% endblock title %}

{% block content %}

{% include "_header.html" %}

<div class="post">
  <main class="post__content">
    {% if page.extra.toc %}
    <aside class="post-toc">
      <!-- <nav class="post-toc__nav"> -->
        <ul class="post-toc__list">
          {% for entry in page.toc %}
          <li class="post-toc__item">
            <a class="post-toc__link" href="#{{ entry.id }}">{{ entry.title }}</a>
            {% if entry.children %}
              <ul class="post-toc__list">
                {% for child in entry.children %}
                <li class="post-toc__item">
                  <a class="post-toc__link" href="#{{ child.id }}">{{ child.title }}</a>
                </li>
                {% endfor %}
              </ul>
            {% endif %}
          </li>
          {% endfor %}
        </ul>
      <!-- </nav> -->
    </aside>
    {% endif %}
    <article class="post__article">
      <h1 class="post__title">{{ page.title }}</h1>
      <div class="post__meta">
        <span class="post__date">
          {{ page.date | date }}
          {% if page.updated %}
            &nbsp;&vert;&nbsp;
            Update &nbsp;{{ page.updated | date }}
          {% endif %}
        </span>

        {% if page.taxonomies.tags %}
        <div class="post__tags">
          {% for tag in page.taxonomies.tags %}
            {%- set tag_slug = tag | slugify -%}
              <a 
                class="post__tags-link" 
                href="/tags/{{tag_slug}}"
                target="_blank"
                rel="noopener noreferrer"
              >
                #{{tag_slug}}
              </a>
            {% if not loop.last %} &nbsp; {% endif %}
          {% endfor %}
        </div>
        {% endif %}
      </div>
      {{ page.content | safe }}
    </article>
    <aside class="post__padding"></aside>
  </main>
</div>

{% include "_footer.html" %}

{% endblock content %}
